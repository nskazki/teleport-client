TeleportClient
==============

```
bower install teleport-client --save
```

[TeleportServer](https://github.com/MyNodeComponents/TeleportServer)

<h5>Это RPC клиент, умеет:</h5>
 * Подлучать от сервера список серверных объектов, их методов и типов выбрасываемых событий.
 * Генирировать на основе полученного списка соответствующие объекты и методы.
 * Выбрасывать события серверных объектов из сгенирированных.

<h5>Ограничения:</h5>
 * Работает только с объектами.
 * Работает только с асинхронными методоми серверных объктов, принимающими неограниченное количество аргументов и callback.
 * Выбрасываемые объектами сервера события могут содержать неограниченное количество аргументов.
 * Все аргументы передоваемые на сервер и результаты возвращаемые на клиента проходят через JSON.stringify -> JSON.parse.

<h5>Кил фича:</h5>
Если соединение с сервером кратковременно оборвется, то:
 * Клиент получит все выброшенные серверными объектами события за время отсутствия соединения.
 * Если клиентом был вызван некоторый метод до обрыва соединения, то после переподключения он получит результат этого вызова.

<h5>Requirejs совместимый:</h5>
Если подклюна библиотека requirejs, то TeleportClient будет сформирован как модуль,
иначе добавлен в глобальную область видимости.

<h5>Example:</h5>
```js
var teleportClient = new TeleportClient({
	serverAddress: "ws://localhost:8000",
	autoReconnect: 3000
})
	.on('warn', console.warn.bind(console))
	.on('error', console.error.bind(console))
	.on('ready', function(objectsProps) {
			console.log(objectsProps);

			teleportClient.objects.ipBox
				.getIps(someCallback)
				.on('newIps', someHandler);
	}).init();
```

<h5>Параметры принимаемые конструктором:</h5>
 * `serverAddress` - адрес и порт TeleportServer.
 	<br>default: `ws://localhost:8000`
 * `autoReconnect` - время задержки перед переподключением к серверу, после разрыва соединения.
 	<br>Разрешенные значения:
 	* если `false` - перезапуск произведен не будет.
 	* если число - то это время задержки в миллесекундах.
 	* default: `3000`

<h5>Публичные методы:</h5>
 * `init` - метод инициирующий объект.
 * `destroy` - метод прекращающий работу объекта.

<h5>Info events:</h5>
Эти события выбрасываются с одним аргументом, объектом, cодержащим:
 * поле `desc`, раскрывающим суть события. 
 * дополнительные поля раскрывающие внутреннее состояние TeleportClient.

События:
 * `debug` - логированние клиент-серверного обмена сообщениями.
 * `info` - логированние важных событий.
 	<br>В частности подключение к серверу и получении свойств серверных объектов.
 * `warn` - логированние проблем не влияющих на дальнейшую работы программы. 
 	<br>Например получение неожиданного сообщения от сервера, или возврат результата выполнения команды без зарегестрированного каллбека.
 * `error` - логированние получение которые делают программу неработоспособной. 
 	<br>В частности ошибка соединения с сервером.

<h5>State events:</h5>
Эти события отражают текущее состояние TeleportClient.
<br>Выбрасываются без аргументов, если не указанно другое.

 * `ready` - признак успешного соединения с сервром и регистрации всех серверных объектов.
 	<br>Выбрасывается с одним аргументом, содержащим свойства зарегистрированных объектов.
 * `close` - признак разрыва соединения с сервером.
 	<br>Возникает если:
 	* Вызван метод `destroy` и при этом соединение с сервером еще было активно.
 	* Если соединение с сервером разорванно и при этом `autoReconnect` = `false`.
 * `reconnecting` - признак разрыва соединения, через время указанное в поле `autoReconnect` будет предпринята попытка переподключения.
 * `reconnected` - признак успешного переподключения к серверу.
